
<form class="form-horizontal row" role="form"> 
	<div class="form-body" ng-controller="monitorMissionAssignController as vm"
		kendo-validator="vm.validator" k-options="vm.validatorOptions">
		<div class="fixme">
			<hr style="margin: 0; margin-bottom: 9px;">
			<div class="btn-group margin-left-button">
				<button type="button"
					class="btn btn-default border-radius-left padding-button box-shadow"
					ng-disabled="vm.disable" ng-hide="vm.buttonCreatNew"
					ng-click="vm.add()" uib-tooltip="Thêm mới">
					<div class="action-button add"  translate>&nbsp;&nbsp;&nbsp;&nbsp;</div>
				</button>
				<button type="button"
					class="btn btn-default padding-button box-shadow"
					ng-click="vm.view()" ng-disabled="vm.disable" uib-tooltip="Xem bảng/Chi tiết">
					<div class="action-button view" 
						translate>&nbsp;&nbsp;&nbsp;&nbsp;</div>
				</button>
				<button type="button"
					class="btn btn-default padding-button box-shadow"
					ng-click="vm.saveAll()" ng-disabled="vm.disabledButtom" ng-hide="vm.hideSave" uib-tooltip="Lưu">
					<div class="action-button save"  translate>&nbsp;&nbsp;&nbsp;&nbsp;</div>
				</button>
				<button type="button" class="btn btn-default padding-button box-shadow" ng-click="vm.saveAppro()" ng-disabled="vm.disabledButtom" ng-hide="vm.hideSaveAppro" uib-tooltip="Lưu phê duyệt">
					<div class="action-button save"   translate>&nbsp;&nbsp;&nbsp;&nbsp;</div>
				</button>
				<button type="button"
					class="btn btn-default padding-button box-shadow border-radius-right"
					ng-disabled="vm.buttonRemove" ng-click="vm.remove()" uib-tooltip="Xóa">
					<div class="action-button del"  translate>&nbsp;&nbsp;&nbsp;&nbsp;</div>
				</button>
			</div>
			<div class="btn-group margin-left-button">
				<button type="button" class="btn btn-default  padding-button border-radius-left box-shadow" ng-click="vm.exportFile()" uib-tooltip="Export File PDF">
					<div class="action-button pdf"  translate="">&nbsp;&nbsp;&nbsp;&nbsp;</div>
				</button>
				<button type="button" class="btn btn-default  padding-button border-radius-right box-shadow" ng-click="vm.exportFileDOC()" uib-tooltip="Export File Doc">
					<div class="action-button doc"  translate="">&nbsp;&nbsp;&nbsp;&nbsp;</div>
				</button>
			</div>
			<div class="btn-group">
				<button type="button"
					class="btn btn-default padding-button box-shadow border-radius-left"
					ng-click="vm.trinhDuyet()" uib-tooltip="Trình duyệt">
					<div class="action-button approval"  translate>&nbsp;&nbsp;&nbsp;&nbsp;</div>
				</button>
				<button type="button"
					class="btn btn-default padding-button box-shadow"
					ng-click="vm.pheDuyet()" uib-tooltip="Phê duyệt" >
					<div class="action-button approve" translate>&nbsp;&nbsp;&nbsp;&nbsp;</div>
				</button>
				<button type="button"
					class="btn btn-default padding-button box-shadow border-radius-right"
					ng-click="vm.cancelApprovalBtn()" uib-tooltip="Hủy trình duyệt">
					<div class="action-button cancelAproval"  translate>&nbsp;&nbsp;&nbsp;&nbsp;</div>
				</button>
			</div>
			
		</div>
		<div class="divScroll" id="customScroll">
		<!-- Thông tin chung -->
		<div class="portlet light bordered">
			<div class="portlet-title">
				<div class="caption">
					<span class="caption-subject bold lowercase"
						 translate>Thông tin chung</span>
				</div>
			</div>
			
			<div class="clearfix">
				<div class="form-group col-md-6">
					<label class="col-md-4 control-label">Số hợp đồng</label>
					<div class="col-md-8">
						<input ng-model="vm.item.contractCode" name="contractNo"
							id="contractCode" class="form-control width100" readonly="readonly" />
					</div>
				</div>
				<div class="form-group col-md-6">
					<label class="col-md-4 control-label">Tên hợp đồng</label>
					<div class="col-md-8">
						<input ng-model="vm.item.contractName" name="contractName"
							id="contractName" class="form-control width100" readonly="readonly" />
					</div>
				</div>
			</div>

			<div class="clearfix">
				<div class="form-group col-md-6">
					<label class="col-md-4 control-label">Mã công trình</label>
					<div class="col-md-8">
						<input ng-model="vm.item.constrtCode" class="form-control width100"
							name="constrtCode" id="constrtCode" readonly="readonly" />
					</div>
				</div>
				<div class="form-group col-md-6">
					<label class="col-md-4 control-label">Tên công trình</label>
					<div class="col-md-8">
						<input ng-model="vm.item.constrtName" class="form-control width100"
							name="constrtName" id="constrtName" readonly="readonly" />
					</div>
				</div>
			</div>

			<div class="clearfix">
				<div class="form-group col-md-12">
					<div class="form-group col-md-12">
						<label class="col-md-2 control-label" translate>Địa chỉ
							công trình</label>
						<div class="col-md-10">
							<input type="text" class="form-control width100" name="constrtAddress"
								id="constrtAddress" required readonly=""
								data-required-msg="Không để trống trường này !"
								ng-model="vm.item.constrtAddress">
						</div>
					</div>
				</div>
			</div>

			<div ng-show="vm.showDetail" class="clearfix" disable-all="vm.disableAll">
				<div class="form-group col-md-6">
					<label class="col-md-4 control-label req">Địa điểm ký</label>
					<div class="col-md-8">
						<input ng-model="vm.bean.signPlace" name="signPlace"
							id="signPlace" maxlength="200" ng-disabled="vm.vohieuhoa"
							class="form-control width100" required
							data-required-msg="Không để trống trường này !" /> <span
							data-for="signPlace" class="k-invalid-msg"></span>
					</div>
				</div>

				<div class="form-group col-md-6">
					<label class="col-md-4 control-label req">Ngày ký</label>
					<div class="col-md-8">
						<input class="form-control width100" kendo-date-picker
							name="signDate" id="signDate" 
							ng-disabled="vm.vohieuhoa" k-options="vm.datePickerConfig2"
							k-format="'dd/MM/yyyy'" ng-model="vm.bean.signDate" required
							data-required-msg="Không để trống trường này !"/> <span
							data-for="signDate" class="k-invalid-msg" ></span>
					</div>
			 		<script>
						$(function() {
							var validTo = $("#signDate");
							validTo.kendoMaskedTextBox({
								mask : "00/00/0000"
							});

							validTo.kendoDatePicker({
								format : "dd/MM/yyyy"
							});

							validTo.closest(".k-datepicker").add(validTo)
									.removeClass("k-textbox");
						});
					</script> 
				</div>
			</div>
		</div>
		<!-- Thông tin chung -->

		<div ng-show="vm.showDetail">
			<div
				data-ng-include="'qlhc/monitorMissionAssign/General_Cat_Employee.html'"></div>
			<div
				data-ng-include="'qlhc/monitorMissionAssign/Detail_information.html'"></div>

			<!-- phê duyệt -->
			<div class="portlet light bordered" ng-show="vm.showPheduyet">
				<div class="portlet-title">
					<div class="caption">
						<span class="caption-subject bold lowercase" style="margin: 0px 0 0 17px"  translate>Phê Duyệt</span>
					</div>
				</div>
				<div class="portlet-body form">
					<!-- BEGIN FORM-->
					<form action="#" class="form-horizontal">
						<br />
						<div class="clearfix">
							<div class="form-group col-md-6">
								<label class="col-md-4 control-label " translate>Phê duyệt</label>
								<div class="col-md-8">
									<select kendo-drop-down-list class="form-control"
										name="statusCa" id="statusCa" ng-model="vm.approData.statusCa"
										style="width: 100%">
										<option value="1" selected>Phê duyệt</option>
										<option value="2">Từ chối</option>
									</select> <span data-for='statusCa' class='k-invalid-msg'></span>
								</div>
							</div>
							<div class="form-group col-md-6"></div>
						</div>
						<div class="clearfix">
							<div class="form-group col-md-12">
								<div class="form-group col-md-12">
									<label class="col-md-2 control-label" translate>Nhận xét/ Lý do từ chối duyệt</label>
									<div class="col-md-10">
										<textarea class="form-control width100" name="statusDetail"
											id="statusDetail" ng-model="vm.approData.comments"> 
        								</textarea>
										<span data-for='constructId' class='k-invalid-msg'></span>
									</div>
								</div>
							</div>
						</div>
						<br />
					</form>
				</div>
			</div>
			<!-- END phê duyệt -->
		</div>
		<!-- bảng cha -->
		<div ng-show="!vm.showDetail">
			<div class="portlet light bordered" >
				
				<div class="portlet-title">
					<div class="caption">
						<span class="caption-subject bold lowercase"
							 translate>Danh sách</span>
					</div>
				</div>
				
				<div kendo-grid="vm.mmaGrid" k-options="vm.gridMissionOptions" id="stt"></div>
				 <script>
                $(document).ready(function() {
                    var tooltip = $("#stt").kendoTooltip({
                        filter: "td",
                        position: "top",
                        content: function (e) {
                        	var target = e.target; // element for which the tooltip is shown
	          	              if ($(target).hasClass('statusColumn')) {//check column status
	          	            	var dataItem = $("#stt").data("kendoGrid").dataItem(e.target.closest("tr"));
	          	              	var status = dataItem.statusCa;
	          	              	if(status===3){ // check co pjai tu choi hay ko
	          	              		var content=dataItem.comments;
	          	              	} else {
	          	              	var content=$(target).text();
	          	              	}
	          	              	return content;
	          	              } else {
	          	            	return $(target).text();
	          	              }
          	            }
                    }).data("kendoTooltip");


                    $("#stt").find("td").click(false);
                });
            </script> 
			</div>
		</div>
		<div class="force-overflow"></div>
    </div>
		<!--END bảng cha -->
	</div>
</form>


