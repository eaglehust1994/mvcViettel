<div ng-controller="groundhandoverController as vm">
	<div class="btn-toolbar margin-bottom-10 margin-top">
		<div class="btn-group">
			<button type="button"
				class="btn btn-default padding-button box-shadow"
				ng-click="vm.add()" ng-hide="vm.hide" uib-tooltip="Thêm mới">
				<div class="action-button add"  translate
					ng-hide="vm.hide">&nbsp;&nbsp;&nbsp;&nbsp;</div>
			</button>
			<button type="button"
				class="btn btn-default padding-button box-shadow border-radius-right"
				ng-click="vm.showGrid()"  uib-tooltip="Xem bảng/Chi tiết">
				<div class="action-button view "
					translate>&nbsp;&nbsp;&nbsp;&nbsp;</div>
			</button>
			<button type="button"
				class="btn btn-default padding-button box-shadow"
				ng-click="vm.save()" ng-hide="vm.hideSave" uib-tooltip="Lưu" >
				<div class="action-button save" translate>&nbsp;&nbsp;&nbsp;&nbsp;</div>
			</button>
			<button type="button"
				class="btn btn-default padding-button box-shadow"
				ng-click="vm.remove()" ng-hide="vm.hideDelete" uib-tooltip="Xóa" >
				<div class="action-button del" translate>&nbsp;&nbsp;&nbsp;&nbsp;</div>
			</button>
		</div>
		<div class="btn-group">
			<button type="button"
				class="btn btn-default padding-button border-radius-left box-shadow"
				ng-click="vm.exportFile()" uib-tooltip="ExportPDF">
				<div class="action-button pdf"  translate>&nbsp;&nbsp;&nbsp;&nbsp;</div>
			</button>
			<button type="button"
				class="btn btn-default padding-button  border-radius-right box-shadow"
				ng-click="vm.ExportDOC()" uib-tooltip="ExportDOC">
				<div class="action-button doc"  translate>&nbsp;&nbsp;&nbsp;&nbsp;</div>
			</button>
		</div>
		<div class="btn-group">
			<button id="button" type="button"
				class="btn btn-default padding-button border-radius-left box-shadow"
				ng-click="vm.sendBrowse()" uib-tooltip="Trình duyệt">
				<div class="action-button approval" 
					translate>&nbsp;&nbsp;&nbsp;&nbsp;</div>
			</button>

			<button id="button" type="button"
				class="btn btn-default padding-button   box-shadow"
				ng-click="vm.pheDuyet()" ng-hide="vm.hidePheDuyet" uib-tooltip="Phê duyệt">
				<div class="action-button approve"  translate>&nbsp;&nbsp;&nbsp;&nbsp;</div>
			</button>
			
			<button type="button"
					class="btn btn-default padding-button box-shadow border-radius-right"
					ng-click="vm.cancelApprovalBtn()" uib-tooltip="Hủy trình duyệt">
					<div class="action-button cancelAproval"  translate>&nbsp;&nbsp;&nbsp;&nbsp;</div>
			</button>
		</div>
	</div>
	<!-- 	<hr class="line-Hr"> -->
	<form class="form-horizontal row" role="form"
		disable-all="vm.disableCreatOne" kendo-validator="vm.validator"
		k-options="vm.validatorOptions">
		<div class="portlet light bordered">
			<div class="portlet-title">
				<div class="caption">
					<span class="caption-subject bold lowercase" 
						translate>Thông tin chung</span>
				</div>
			</div>
			<div class="portlet-body form">
				</br>
				<div class="clearfix">
					<div class="form-group col-md-6">
						<label class="col-md-4 control-label" translate>Số Hợp
							đồng</label>
						<div class="col-md-8">
							<input class="form-control width100" name="contractCode" id="contractCode"
								ng-model="vm.groundhandover.contractCode" disabled="disabled">
						</div>
					</div>
					<div class="form-group col-md-6">
						<label class="col-md-4 control-label" translate>Ngày kí
							hợp đồng</label>
						<div class="col-md-8">
							<input class="form-control width100" id="signed_date" name="signed_date"
								ng-model="vm.groundhandover.signed_date" readonly="readonly">
						</div>
					</div>
				</div>
				<div class="clearfix">
					<div class="form-group col-md-6">
						<label class="col-md-4 control-label " translate>Mã Công
							Trình</label>
						<div class="col-md-8">
							<input class="form-control width100" name="constrtCode" id="constrtCode"
								ng-model="vm.groundhandover.constrtCode" disabled="disabled" />
						</div>
					</div>
					<div class="form-group col-md-6">
						<label class="col-md-4 control-label " translate>Tên công
							trình</label>
						<div class="col-md-8">
							<input class="form-control width100" id="constrtName"
								name="constrtName" ng-model="vm.groundhandover.constrtName"
								disabled="disabled" />
						</div>
					</div>
				</div>
				<div class="clearfix">
					<div class="form-group col-md-12">
						<div class="form-group col-md-12">
							<label class="col-md-2 control-label" translate>Địa chỉ
								công trình</label>
							<div class="col-md-10">
								<input class="form-control width100" name="constrtAddress"
									id="constrtAddress" ng-model="vm.groundhandover.constrtAddress"
									disabled="disabled" />
							</div>
						</div>
					</div>
				</div>
</div>
				<style>
				.k-datetimepicker .k-picker-wrap .k-icon {margin: 4px 2px;}
				</style>
				<div class="clearfix" ng-show="vm.showHandoverDate" disable-all="vm.disableCreatTwo">
					<div class="form-group col-md-6">
						<label class="col-md-4 control-label req" translate>Tại</label>
						<div class="col-md-8">
							<input class="form-control width100" name="signPlace" id="signPlace"
								ng-model="vm.groundhandover.signPlace" required maxlength="1000"
								data-required-msg="Địa điểm bàn giao không được để trống" /> <span
								data-for='signPlace' class='k-invalid-msg'></span>
						</div>
					</div>

					<div class="form-group col-md-6">
						<label class="col-md-4 control-label req" translate>Ngày
							bàn giao</label>
						<div class="col-md-8">
							<input class="width100" kendo-date-picker name="handoverDate"
								id="handoverDate" ng-model="vm.groundhandover.handoverDate"
								ng-disabled="vm.disabledHandoverDate" k-format="'dd/MM/yyyy'"
								data-date-msg="Ngày bàn giao không hợp lệ" required
								data-required-msg="Ngày bàn giao không được để trống" /> <span
								data-for='handoverDate' class='k-invalid-msg'></span>
						</div>
						<script>
							$(function() {
								var validTo = $("#handoverDate");
								validTo.kendoMaskedTextBox({
									mask : "00/00/0000"
								});

								validTo.kendoDatePicker({
									format : "dd/MM/yyyy"
								});

								validTo.closest(".k-datepicker").add(validTo)
										.removeClass("k-textbox");
							});
						</script>
					</div>

				</div>
			</div>
		
		<div ng-show="!vm.showDetail">
		<div class="portlet light bordered">
			<div class="portlet-title">
				<div class="caption">
					<span class="caption-subject bold lowercase" 
						translate>
							Danh sách
						</span>
				</div>
			</div>
			<div kendo-grid="vm.reportGrid" k-options="vm.reportgridOptions"
				id="reportGrid"
				></div>
		</div>
		</div>
		<div ng-show="vm.showDetail">
			<div data-ng-include="'qlhc/GroundHandover/ground_handover.html'"></div>
		</div>
		
		<script>
                $(document).ready(function() {
                    var tooltip = $("#reportGrid").kendoTooltip({
                        filter: "td",
                        position: "top",
                        content: function (e) {
                        	var target = e.target; // element for which the tooltip is shown
	          	              if ($(target).hasClass('statusColumn')) {//check column status
	          	            	var dataItem = $("#reportGrid").data("kendoGrid").dataItem(e.target.closest("tr"));
	          	              	var status = dataItem.statusCa;
	          	              	console.log(dataItem.statusCa);
	          	              	if(status===3){ // check co pjai tu choi hay ko
	          	              		var content=dataItem.comments;
	          	              	} else {
	          	              	var content=$(target).text();
	          	              	}
	          	              	return content;
	          	              } else {
	          	            	return $(target).text();
	          	              }
          	            }
                    }).data("kendoTooltip");


                    $("#estimateWorkTablesEva").find("td").click(false);
                });
            </script>
		</form>
</div>

<!-- <hr class="line-Hr"> -->
