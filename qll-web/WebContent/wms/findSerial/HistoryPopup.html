
<form class="form-horizontal row" role="form" id="history" kendo-validator="caller.validator" k-options="validatorOptions"
	name="history">
	<div ng-show="caller.showSearch">
		<form class="form-horizontal row" role="form">
			<div class="form-body">
				<div class="portlet light bordered">
					<div class="portlet-title background-title">
						<div class="caption ">
							<span class="caption-subject bold lowercase" translate>Thông tin tìm kiếm </span>
						</div>
						<div class="text-right margin-row-title">
							<i data-toggle="collapse" data-target="#demo1"
								class="fa fa-chevron-circle-up" aria-hidden="true"></i>
						</div>
					</div>
					<div id="demo1" class="findSerialPopup collapse in from-search">
						<div class="clearfix position-relative">
							<div class="form-group col-md-12">
								<label class="col-md-4 control-label" translate>Serial</label>
								<div class="col-md-8">
									<label class="control-label pull-left"
										ng-bind="caller.historySearch.serial"
										ng-model="caller.historySearch.serial"></label>
								</div>
							</div>
						</div>
						<div class="clearfix position-relative">
							<div class="form-group col-md-12">
								<label class="col-md-4 control-label" translate>Tên hàng</label>
								<div class="col-md-8">
									<label class="control-label pull-left"
										ng-bind="caller.historySearch.goodsName"
										ng-model="caller.historySearch.goodsId"></label>
								</div>
							</div>
						</div>
						<div class="clearfix position-relative">
							<div class="form-group col-md-12">
								<label class="col-md-4 control-label req" translate>Ngày nhập/xuất: Từ ngày </label>
								<div class="col-md-3">
									<input kendo-date-picker class="form-control width100" required data-date-msg="Ngày tạo không hợp lệ"
										name="startDate" ng-model="caller.historySearch.startDate" 
										data-required-msg="Ngày tạo không được để trống" date-time
										k-format="'dd/MM/yyyy'" id="startDate" ng-change="caller.checkErr1()"
										min-year="1000" data-minyear-msg="Ngày tạo không hợp lệ"/>
										<span data-for="startDate" class="k-invalid-msg" id="errorStart"></span>
										<span style="color:red">{{caller.errMessage1}}</span>
								</div>
							
								<label class="col-md-1 control-label" translate>đến</label>
								<div class="col-md-3 position-relative">
									<input kendo-date-picker class="form-control width100"  data-date-msg="Ngày đến không hợp lệ"
										name="endDate" ng-model="caller.historySearch.endDate" date-time
										k-format="'dd/MM/yyyy'" id="endDate" ng-change="caller.checkErr()"
										min-year="1000" data-minyear-msg="Ngày đến không hợp lệ"/>
										<span data-for="endDate" class="k-invalid-msg" id="errorEnd"></span>
										<span style="color:red">{{caller.errMessage}}</span>
								</div>
							</div>
							<div class="clearfix form-actions margin-top">
								<div class="row">
									<div class="col-md-12 text-center" style="margin-top: 10px; margin-bottom: 10px;">
										<button type="button" uib-tooltip="Xem lịch sử" id="doSearchHistory"
											class="btn btn-qlk padding-search-right searchQLK width125" ng-click="caller.doSearchHistory()" translate>
											<i class="fa fa-search" aria-hidden="true"></i>Xem lịch sử
										</button>
									</div>
								</div>
							</div>
						</div>
					</div>
				</div>
			</div>
		</form>
	</div>
	<div class="portlet light bordered">
		<div class="portlet-title background-title">
			<div class="caption">
				<span class="caption-subject bold lowercase" translate>Kết
					quả tìm kiếm:  </span>&nbsp;<label class="control-label bold lowercase" id="findSerialCount2">{{vm.count2}}</label><label class="control-label bold lowercase">&nbsp;bản ghi</label>
			</div>
			<div class="text-right margin-row-title">
				<i data-toggle="collapse" data-target="#demoHistory"
					class="fa fa-chevron-circle-up" aria-hidden="true"></i>
			</div>

		</div>
		<div id="demoHistory" class="collapse in from-search">
			<div id="historyGrid" kendo-grid="caller.historyGrid"
				k-editable="false" k-options="caller.historyGridOptions"></div>
		</div>
		
	</div>
	<div class="clearfix form-actions margin-top">
		<div class="row" style="margin-right: 0px">
			<div class="col-md-12 text-right">
				<button type="button" class="btn btn-qlk padding-search-right closeQLK" id="cancelHistoryId" ng-click="caller.cancelSerial()" translate>Đóng</button>
			</div>
		</div>
	</div>
</form>

<script type="text/javascript">
	$(document).on("keypress", function (e) {
		switch(e.keyCode) {
			case 27:
				$("#cancelHistoryId").click();
				break;
			case 13:
				if($(':focus').size()===0){
					$( "#cancelHistoryId" ).click(function( event ) {
						event.stopPropagation();
						});
						break;
				}
				if(e.keyCode===13&&!$('#doSearchHistory:focus').length&&!$('#cancelHistoryId:focus').length){
					$("#doSearchHistory").click();
					break;
				}
		}
	} );
</script>