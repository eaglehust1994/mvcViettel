
<div data-ng-controller="changeProductController as vm"
	id="changeControl">
	<div ng-show="vm.showSearch">
		<p class="text-brecum">{{vm.String}}</p>
		<form class="form-horizontal row" role="form"
			kendo-validator="vm.validator" k-options="vm.validatorOptions">
			<div class="form-body">
				<div class="portlet light bordered">
					<div class="portlet-title background-title">
						<div class="caption ">
							<span class="caption-subject bold lowercase" translate>Thông
								tin tìm kiếm </span>
						</div>
						<div class="text-right margin-row-title">
							<i data-toggle="collapse" data-target="#demoOrderChange"
								class="fa fa-chevron-circle-up" aria-hidden="true"></i>
						</div>
					</div>
					<div id="demoOrderChange" class="collapse in from-search">
						<div class="clearfix position-relative">
							<div class="clearfix">
								<div class="form-group col-md-6">
									<label class="col-md-4 control-label" translate>Mã yêu
										cầu</label>
									<div class="col-md-8">
										<input class=" form-control width100" type="text"
											id="changeId" ng-model="vm.orderChangeGoodsSearch.keySearch" />
									</div>
								</div>
								<multi-select model-label="Kho thay đổi" caller="vm"
									template-url="wms/popup/gridViewmMulti.html" domain="true"
									header-template="vm.headerTemplate" template-auto="vm.template"
									page="1" page-size="10" popup-id="stockId"
									popup-type="gridplus"
									popup-source-link="configSignVofficeRsServiceRest/configSignVoffice/doSearchStock"
									combo-id="changeStockId"
									combo-source-link="stockRsServiceRest/getForAutoCompleteStockDomain"
									combo-name="name" combo-value="stockId" combo-code="name"
									model-Id="vm.orderChangeGoodsSearch.listStockId"
									combo-search="vm.commonSearch" combo-grid="vm.gridCommon"
									model-name="vm.orderChangeGoodsSearch.stockName" />
								</multi-select>
							</div>
						</div>
						<div class="clearfix">
							<div class="form-group col-md-6">
								<label class="col-md-4 control-label req" translate>Ngày
									tạo : Từ ngày </label>
								<div class="col-md-4">
									<input name="createdDateFromChange" id="createdDateFromChange"
										ng-model="vm.orderChangeGoodsSearch.createdDateFrom"
										class="form-control width100" k-format="'dd/MM/yyyy'" required
										data-required-msg="Ngày tạo không được để trống"
										min-year="1000" data-minyear-msg="Ngày tạo không hợp lệ"
										data-date-msg="Ngày tạo không hợp lệ"
										ng-change="vm.checkErr()" date-time /> <span
										data-for="createdDateFromChange" id='err1'
										class="k-invalid-msg"></span> <span style="color: red">{{vm.listMess.errMessage1}}</span>
									<span style="color: red">{{vm.errMessage2}}</span>
									<!--  <span id="errorcreatedDateFromChange" class="k-invalid-msg" style="color: red" >Ngày không hợp lệ</span>  -->
								</div>


								<label class="col-md-1 control-label" translate>đến</label>
								<div class="col-md-3 position-relative">
									<input name="createdDateToChange" id="createdDateToChange"
										ng-model="vm.orderChangeGoodsSearch.createdDateTo" date-time
										style="width: 100%;" data-date-msg="Ngày đến không hợp lệ"
										k-format="'dd/MM/yyyy'" min-year="1000"
										data-minyear-msg="Ngày đến không hợp lệ"
										ng-change="vm.checkErr()" /> <span
										data-for="createdDateToChange" id='err2' class="k-invalid-msg"></span>
									<span style="color: red">{{vm.listMess.errMessage}}</span>
									<!-- <span id="errorcreatedDateToChange" class="k-invalid-msg" style="color: red" >Ngày không hợp lệ</span> -->
								</div>


								<div class="One_icon">
									<i class="fa fa-times" aria-hidden="true"
										ng-click="vm.clearSearchDate()"></i>
								</div>
							</div>

							<auto-search model-label="Người tạo" caller="vm"
								template-url="views/popup/gridViewCreateUser.html"
								header-template="vm.userHeaderTemplate"
								template-auto="vm.userTemplate" page="1" page-size="20"
								popup-id="ar_deposit_browser_adOrgId" popup-type="gridplusUser"
								popup-source-link="sysUserServiceRest/user/sysAllUserswms"
								combo-id="changeCreator"
								combo-source-link="sysUserServiceRest/sysUserwms/getForAutoComplete"
								combo-name="fullName" combo-value="sysUserId"
								combo-code="employeeCode" combo-search="vm.commonSearch"
								combo-grid="vm.gridCreator"
								model-id="vm.orderChangeGoodsSearch.createdBy"
								model-name="vm.orderChangeGoodsSearch.fullName"> </auto-search>

						</div>
						<div class="clearfix">
							<div class="form-group col-md-6">
								<label class="col-md-4 control-label " translate>Trạng
									thái</label>
								<div class="col-md-8" id="listStatusID">
									<select kendo-multi-select id="listStatus" style="width: 100%"
										name="listStatus"
										ng-model="vm.orderChangeGoodsSearch.listStatus">
										<option value="0">--Tất cả--</option>
										<option value="1">1.Chưa được duyệt</option>
										<option value="2">2.Đã duyệt và thực hiện</option>
										<option value="3">3.Đã hủy</option>
										<option value="4">4.Đã từ chối</option>
									</select>
								</div>
								<div class="One_icon">
									<i class="fa fa-times" aria-hidden="true"
										ng-click="vm.clearStatus()"></i>
								</div>
							</div>
						</div>
						<div class="clearfix form-actions margin-top">
							<div class="row">
								<div class="col-md-12 text-center">
									<button type="button" id="findOrderChange"
										class="btn  btn-qlk padding-search-right searchQLK" translate
										ng-click="vm.doSearch()">Tìm kiếm</button>
								</div>
							</div>
						</div>
					</div>
				</div>
			</div>
		</form>
	</div>


	<div class="portlet light bordered">
		<div class="portlet-title background-title">
			<div class="caption">
				<span class="caption-subject bold lowercase" translate>Kết
					quả tìm kiếm: </span>&nbsp;<label class="control-label bold lowercase"
					id="changeCount"></label><label
					class="control-label bold lowercase">&nbsp;bản ghi</label>
			</div>
			<div class="text-right margin-row-title">
				<i data-toggle="collapse" data-target="#orderChangeCollapse"
					class="fa fa-chevron-circle-up" aria-hidden="true"></i>
			</div>
		</div>
		<div id="orderChangeCollapse" class="collapse in ">
			<div id="orderChangeGoodskGrid" kendo-grid="vm.orderChangeGoodskGrid"
				k-editable="false" k-options="vm.gridOptions"></div>
		</div>
	</div>
</div>
<script type="text/javascript">
	$('#changeControl')
			.keypress(
					function(event) {
						$("input").change(function() {
							$(this).val($.trim($(this).val()));
						});

						document.onkeydown = keyDown;
						function keyDown(e) {
							switch (e.keyCode) {
							case 27:
								$("#cancel").click();
								break;
							case 13:
								if ($('.k-widget.k-window.fix-footer').css(
										'display') !== 'block') {

									$("#findOrderChange").click();
									break;
								}
							}
						}
					});
	$("#listStatusID").keypress(function(event) {
		var keycode = (event.keyCode ? event.keyCode : event.which);
		if (keycode !== 9 & keycode !== 16 && keycode !== 13) {

			event.preventDefault();
		}
	})
</script>
